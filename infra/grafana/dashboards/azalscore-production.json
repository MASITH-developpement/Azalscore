{
  "annotations": {
    "list": []
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": 3,
  "links": [],
  "liveNow": false,
  "panels": [
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 100,
      "title": "üî¥ SIGNAUX CRITIQUES",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "blue",
                "value": null
              }
            ]
          }
        }
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 0,
        "y": 1
      },
      "id": 950,
      "options": {
        "graphMode": "none",
        "colorMode": "background",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "title": "üë• Utilisateurs",
      "type": "stat",
      "targets": [
        {
          "expr": "azals_users_connected",
          "legendFormat": "Connect√©s",
          "instant": true
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "yellow",
                "value": 1
              },
              {
                "color": "red",
                "value": 5
              }
            ]
          },
          "unit": "percent",
          "noValue": "0%"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 3,
        "y": 1
      },
      "id": 1,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "sum(rate(azals_http_requests_total{status_code=~\"5..\"}[15m])) / sum(rate(azals_http_requests_total[15m])) * 100 or vector(0)",
          "legendFormat": "5xx %",
          "instant": true
        }
      ],
      "title": "Taux erreurs 5xx",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "noValue": "0 ms",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "yellow",
                "value": 500
              },
              {
                "color": "red",
                "value": 2000
              }
            ]
          },
          "unit": "ms"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 7,
        "y": 1
      },
      "id": 2,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "histogram_quantile(0.95, sum(rate(azals_http_request_duration_seconds_bucket[15m])) by (le)) * 1000",
          "legendFormat": "P95",
          "instant": true
        }
      ],
      "title": "Latence P95",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "yellow",
                "value": 70
              },
              {
                "color": "red",
                "value": 85
              }
            ]
          },
          "unit": "percent"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 11,
        "y": 1
      },
      "id": 3,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100)",
          "legendFormat": "CPU %"
        }
      ],
      "title": "CPU Host",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "yellow",
                "value": 70
              },
              {
                "color": "red",
                "value": 85
              }
            ]
          },
          "unit": "percent"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 15,
        "y": 1
      },
      "id": 4,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "(1 - node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes) * 100",
          "legendFormat": "RAM %"
        }
      ],
      "title": "RAM Host",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "yellow",
                "value": 70
              },
              {
                "color": "red",
                "value": 90
              }
            ]
          },
          "unit": "percent"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 19,
        "y": 1
      },
      "id": 5,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "(1 - node_filesystem_avail_bytes{mountpoint=\"/\"} / node_filesystem_size_bytes{mountpoint=\"/\"}) * 100",
          "legendFormat": "Disk %"
        }
      ],
      "title": "Disque",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "mappings": [
            {
              "options": {
                "0": {
                  "color": "red",
                  "text": "DOWN"
                },
                "1": {
                  "color": "green",
                  "text": "UP"
                }
              },
              "type": "value"
            }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "red",
                "value": null
              },
              {
                "color": "green",
                "value": 1
              }
            ]
          }
        }
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 23,
        "y": 1
      },
      "id": 6,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "reduceOptions": {
          "calcs": [
            "last"
          ]
        }
      },
      "targets": [
        {
          "expr": "min(up{job=~\"azals-api|postgres|redis\"})",
          "instant": true,
          "legendFormat": "All services"
        }
      ],
      "title": "Services UP",
      "type": "stat"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 5
      },
      "id": 200,
      "title": "üìä API ‚Äî Requ√™tes & Latence",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 15,
            "lineWidth": 2
          },
          "unit": "reqps"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 6
      },
      "id": 10,
      "options": {
        "tooltip": {
          "mode": "multi"
        }
      },
      "targets": [
        {
          "expr": "sum(rate(azals_http_requests_total[5m]))",
          "legendFormat": "Total RPS"
        },
        {
          "expr": "sum(rate(azals_http_requests_total{status_code=~\"2..\"}[5m]))",
          "legendFormat": "2xx"
        },
        {
          "expr": "sum(rate(azals_http_requests_total{status_code=~\"4..\"}[5m]))",
          "legendFormat": "4xx"
        },
        {
          "expr": "sum(rate(azals_http_requests_total{status_code=~\"5..\"}[5m]))",
          "legendFormat": "5xx"
        }
      ],
      "title": "Requ√™tes par seconde (RPS)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 10,
            "lineWidth": 2
          },
          "unit": "s"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 6
      },
      "id": 11,
      "options": {
        "tooltip": {
          "mode": "multi"
        }
      },
      "targets": [
        {
          "expr": "histogram_quantile(0.50, sum(rate(azals_http_request_duration_seconds_bucket[5m])) by (le))",
          "legendFormat": "P50"
        },
        {
          "expr": "histogram_quantile(0.95, sum(rate(azals_http_request_duration_seconds_bucket[5m])) by (le))",
          "legendFormat": "P95"
        },
        {
          "expr": "histogram_quantile(0.99, sum(rate(azals_http_request_duration_seconds_bucket[5m])) by (le))",
          "legendFormat": "P99"
        }
      ],
      "title": "Latence API (P50 / P95 / P99)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 5,
            "lineWidth": 1
          },
          "unit": "s"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 14
      },
      "id": 12,
      "targets": [
        {
          "expr": "topk(10, histogram_quantile(0.95, sum(rate(azals_http_request_duration_seconds_bucket[5m])) by (le, endpoint)))",
          "legendFormat": "{{endpoint}}"
        }
      ],
      "title": "Top endpoints ‚Äî Latence P95",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 14
      },
      "id": 13,
      "targets": [
        {
          "expr": "sum(azals_http_requests_in_progress) by (endpoint)",
          "legendFormat": "{{endpoint}}"
        }
      ],
      "title": "Requ√™tes en cours",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 22
      },
      "id": 300,
      "title": "üêç Python Runtime ‚Äî M√©moire, CPU, GC",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 20,
            "lineWidth": 2
          },
          "unit": "bytes"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 0,
        "y": 23
      },
      "id": 20,
      "targets": [
        {
          "expr": "process_resident_memory_bytes{job=\"azals-api\"}",
          "legendFormat": "RSS (r√©el)"
        },
        {
          "expr": "process_virtual_memory_bytes{job=\"azals-api\"}",
          "legendFormat": "Virtual"
        }
      ],
      "title": "M√©moire Process (RSS vs Virtual)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "lineWidth": 2
          },
          "unit": "short"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 8,
        "y": 23
      },
      "id": 21,
      "targets": [
        {
          "expr": "rate(process_cpu_seconds_total{job=\"azals-api\"}[5m])",
          "legendFormat": "CPU cores utilis√©s"
        }
      ],
      "title": "CPU Process (rate)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 10,
            "lineWidth": 2
          },
          "unit": "ops"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 16,
        "y": 23
      },
      "id": 22,
      "targets": [
        {
          "expr": "rate(python_gc_objects_collected_total{job=\"azals-api\"}[5m])",
          "legendFormat": "Gen {{generation}} collected/s"
        },
        {
          "expr": "rate(python_gc_collections_total{job=\"azals-api\"}[5m])",
          "legendFormat": "Gen {{generation}} cycles/s"
        }
      ],
      "title": "Garbage Collector Python",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 15,
            "gradientMode": "scheme",
            "lineWidth": 2
          },
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "yellow",
                "value": 1073741824
              },
              {
                "color": "red",
                "value": 1610612736
              }
            ]
          },
          "unit": "bytes"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 31
      },
      "id": 23,
      "targets": [
        {
          "expr": "process_resident_memory_bytes{job=\"azals-api\"}",
          "legendFormat": "RSS actuel"
        },
        {
          "expr": "predict_linear(process_resident_memory_bytes{job=\"azals-api\"}[1h], 3600)",
          "legendFormat": "Pr√©diction +1h"
        }
      ],
      "title": "‚ö†Ô∏è D√©rive m√©moire (RSS trend 1h)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 31
      },
      "id": 24,
      "targets": [
        {
          "expr": "process_open_fds{job=\"azals-api\"}",
          "legendFormat": "Ouverts"
        },
        {
          "expr": "process_max_fds{job=\"azals-api\"}",
          "legendFormat": "Max"
        }
      ],
      "title": "File Descriptors",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 39
      },
      "id": 400,
      "title": "ü§ñ Intelligence Artificielle",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 10,
            "lineWidth": 2
          },
          "unit": "s"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 0,
        "y": 40
      },
      "id": 30,
      "targets": [
        {
          "expr": "histogram_quantile(0.50, sum(rate(azals_ai_inference_duration_seconds_bucket[5m])) by (le, model))",
          "legendFormat": "{{model}} P50"
        },
        {
          "expr": "histogram_quantile(0.95, sum(rate(azals_ai_inference_duration_seconds_bucket[5m])) by (le, model))",
          "legendFormat": "{{model}} P95"
        }
      ],
      "title": "Temps inf√©rence IA (P50/P95)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "reqps"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 8,
        "y": 40
      },
      "id": 31,
      "targets": [
        {
          "expr": "sum(rate(azals_ai_requests_total[5m])) by (model)",
          "legendFormat": "{{model}} total"
        },
        {
          "expr": "sum(rate(azals_ai_requests_total{status=\"error\"}[5m])) by (model)",
          "legendFormat": "{{model}} errors"
        }
      ],
      "title": "Requ√™tes IA / sec",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 16,
        "y": 40
      },
      "id": 32,
      "targets": [
        {
          "expr": "sum(rate(azals_ai_guardian_decisions_total[5m])) by (decision)",
          "legendFormat": "{{decision}}"
        }
      ],
      "title": "Guardian ‚Äî D√©cisions s√©curit√©",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 6,
        "x": 0,
        "y": 48
      },
      "id": 33,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "azals_ai_sessions_active",
          "legendFormat": "Sessions"
        }
      ],
      "title": "Sessions IA actives",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 6,
        "x": 6,
        "y": 48
      },
      "id": 34,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "sum(increase(azals_ai_tokens_total[5m]))",
          "legendFormat": "Tokens"
        }
      ],
      "title": "Tokens consomm√©s (5m)",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 15,
            "lineWidth": 2,
            "stacking": {
              "mode": "normal"
            }
          },
          "unit": "short"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*input.*"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#73BF69",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*output.*"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#F2495C",
                  "mode": "fixed"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 48
      },
      "id": 35,
      "targets": [
        {
          "expr": "sum(rate(azals_ai_tokens_total{model=\"claude-sonnet-4\", direction=\"input\"}[5m])) * 60",
          "legendFormat": "Claude input/min"
        },
        {
          "expr": "sum(rate(azals_ai_tokens_total{model=\"claude-sonnet-4\", direction=\"output\"}[5m])) * 60",
          "legendFormat": "Claude output/min"
        },
        {
          "expr": "sum(rate(azals_ai_tokens_total{model=\"gpt-4o\", direction=\"input\"}[5m])) * 60",
          "legendFormat": "GPT-4 input/min"
        },
        {
          "expr": "sum(rate(azals_ai_tokens_total{model=\"gpt-4o\", direction=\"output\"}[5m])) * 60",
          "legendFormat": "GPT-4 output/min"
        }
      ],
      "title": "üìä Consommation Tokens par IA",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 20,
            "lineWidth": 2
          },
          "unit": "short"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Claude"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#8B5CF6",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "GPT-4"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "#10B981",
                  "mode": "fixed"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 52
      },
      "id": 36,
      "targets": [
        {
          "expr": "sum(azals_ai_tokens_total{model=\"claude-sonnet-4\"})",
          "legendFormat": "Claude"
        },
        {
          "expr": "sum(azals_ai_tokens_total{model=\"gpt-4o\"})",
          "legendFormat": "GPT-4"
        }
      ],
      "title": "üìà Tokens cumul√©s par mod√®le",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "description": "Estimation: $3/M input, $15/M output",
      "fieldConfig": {
        "defaults": {
          "decimals": 4,
          "unit": "currencyUSD"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 12,
        "y": 56
      },
      "id": 37,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "(sum(increase(azals_ai_tokens_total{model=\"claude-sonnet-4\", direction=\"input\"}[1h])) * 0.000003) + (sum(increase(azals_ai_tokens_total{model=\"claude-sonnet-4\", direction=\"output\"}[1h])) * 0.000015)",
          "legendFormat": "Co√ªt"
        }
      ],
      "title": "Claude (1h)",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "description": "Projection mensuelle bas√©e sur le taux actuel. $3/M input, $15/M output",
      "fieldConfig": {
        "defaults": {
          "decimals": 2,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "yellow",
                "value": 50
              },
              {
                "color": "orange",
                "value": 100
              },
              {
                "color": "red",
                "value": 200
              }
            ]
          },
          "unit": "currencyUSD"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 15,
        "y": 56
      },
      "id": 39,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "((sum(rate(azals_ai_tokens_total{model=\"claude-sonnet-4\", direction=\"input\"}[1h])) * 0.000003) + (sum(rate(azals_ai_tokens_total{model=\"claude-sonnet-4\", direction=\"output\"}[1h])) * 0.000015)) * 3600 * 24 * 30",
          "legendFormat": "Co√ªt/mois"
        }
      ],
      "title": "üí∞ Claude /mois",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "description": "Estimation: $2.5/M input, $10/M output",
      "fieldConfig": {
        "defaults": {
          "decimals": 4,
          "unit": "currencyUSD"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 18,
        "y": 56
      },
      "id": 38,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "(sum(increase(azals_ai_tokens_total{model=\"gpt-4o\", direction=\"input\"}[1h])) * 0.0000025) + (sum(increase(azals_ai_tokens_total{model=\"gpt-4o\", direction=\"output\"}[1h])) * 0.00001)",
          "legendFormat": "Co√ªt"
        }
      ],
      "title": "GPT-4 (1h)",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "description": "Projection mensuelle bas√©e sur le taux actuel. $2.5/M input, $10/M output",
      "fieldConfig": {
        "defaults": {
          "decimals": 2,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "yellow",
                "value": 50
              },
              {
                "color": "orange",
                "value": 100
              },
              {
                "color": "red",
                "value": 200
              }
            ]
          },
          "unit": "currencyUSD"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 21,
        "y": 56
      },
      "id": 41,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "((sum(rate(azals_ai_tokens_total{model=\"gpt-4o\", direction=\"input\"}[1h])) * 0.0000025) + (sum(rate(azals_ai_tokens_total{model=\"gpt-4o\", direction=\"output\"}[1h])) * 0.00001)) * 3600 * 24 * 30",
          "legendFormat": "Co√ªt/mois"
        }
      ],
      "title": "üí∞ GPT-4 /mois",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "description": "Co√ªt mensuel total projet√© (Claude + GPT-4) bas√© sur le taux de consommation actuel",
      "fieldConfig": {
        "defaults": {
          "decimals": 2,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "yellow",
                "value": 100
              },
              {
                "color": "orange",
                "value": 250
              },
              {
                "color": "red",
                "value": 500
              }
            ]
          },
          "unit": "currencyUSD"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 12,
        "x": 12,
        "y": 60
      },
      "id": 42,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "(((sum(rate(azals_ai_tokens_total{model=\"claude-sonnet-4\", direction=\"input\"}[1h])) * 0.000003) + (sum(rate(azals_ai_tokens_total{model=\"claude-sonnet-4\", direction=\"output\"}[1h])) * 0.000015)) + ((sum(rate(azals_ai_tokens_total{model=\"gpt-4o\", direction=\"input\"}[1h])) * 0.0000025) + (sum(rate(azals_ai_tokens_total{model=\"gpt-4o\", direction=\"output\"}[1h])) * 0.00001))) * 3600 * 24 * 30",
          "legendFormat": "Total/mois"
        }
      ],
      "title": "üíµ TOTAL IA /mois (projection)",
      "type": "stat"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 64
      },
      "id": 500,
      "title": "üóÑÔ∏è Base de donn√©es & Cache",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 15,
            "lineWidth": 2
          },
          "unit": "short"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 0,
        "y": 53
      },
      "id": 40,
      "targets": [
        {
          "expr": "pg_stat_activity_count{job=\"postgres\"}",
          "legendFormat": "Actives"
        },
        {
          "expr": "pg_settings_max_connections{job=\"postgres\"}",
          "legendFormat": "Max"
        },
        {
          "expr": "azals_db_connections_active",
          "legendFormat": "Pool applicatif"
        }
      ],
      "title": "PostgreSQL ‚Äî Connexions",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "lineWidth": 2
          },
          "unit": "s"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 8,
        "y": 53
      },
      "id": 41,
      "targets": [
        {
          "expr": "histogram_quantile(0.95, sum(rate(azals_db_query_duration_seconds_bucket[5m])) by (le, operation))",
          "legendFormat": "{{operation}}"
        }
      ],
      "title": "Latence requ√™tes DB (P95)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 15,
            "lineWidth": 2
          },
          "unit": "bytes"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 16,
        "y": 53
      },
      "id": 42,
      "targets": [
        {
          "expr": "redis_memory_used_bytes{job=\"redis\"}",
          "legendFormat": "Utilis√©e"
        },
        {
          "expr": "redis_memory_max_bytes{job=\"redis\"}",
          "legendFormat": "Max"
        }
      ],
      "title": "Redis ‚Äî M√©moire",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "percentunit"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 61
      },
      "id": 43,
      "targets": [
        {
          "expr": "sum(rate(azals_cache_hits_total[5m])) / (sum(rate(azals_cache_hits_total[5m])) + sum(rate(azals_cache_misses_total[5m])))",
          "legendFormat": "Hit ratio"
        },
        {
          "expr": "redis_keyspace_hits_total{job=\"redis\"} / (redis_keyspace_hits_total{job=\"redis\"} + redis_keyspace_misses_total{job=\"redis\"})",
          "legendFormat": "Redis hit ratio"
        }
      ],
      "title": "Cache hit ratio",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "lineWidth": 2
          },
          "unit": "ops"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 61
      },
      "id": 44,
      "targets": [
        {
          "expr": "rate(redis_commands_processed_total{job=\"redis\"}[5m])",
          "legendFormat": "Commandes/s"
        },
        {
          "expr": "redis_connected_clients{job=\"redis\"}",
          "legendFormat": "Clients connect√©s"
        }
      ],
      "title": "Redis ‚Äî Op√©rations/sec",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 69
      },
      "id": 600,
      "title": "üê≥ Containers (Docker Stats)",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 10,
            "lineWidth": 2
          },
          "unit": "percent"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 70
      },
      "id": 50,
      "targets": [
        {
          "expr": "dockerstats_cpu_usage_ratio{name=~\"azals_.*\"}",
          "legendFormat": "{{name}}"
        }
      ],
      "title": "CPU par container",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "fillOpacity": 10,
            "lineWidth": 2
          },
          "unit": "bytes"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 70
      },
      "id": 51,
      "targets": [
        {
          "expr": "dockerstats_memory_usage_bytes{name=~\"azals_.*\"}",
          "legendFormat": "{{name}}"
        }
      ],
      "title": "RAM par container",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "lineWidth": 1
          },
          "unit": "Bps"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 78
      },
      "id": 52,
      "targets": [
        {
          "expr": "rate(dockerstats_network_transmitted_bytes{name=~\"azals_.*\"}[5m])",
          "legendFormat": "{{name}} TX"
        },
        {
          "expr": "rate(dockerstats_network_received_bytes{name=~\"azals_.*\"}[5m])",
          "legendFormat": "{{name}} RX"
        }
      ],
      "title": "R√©seau par container (TX/RX)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "lineWidth": 1
          },
          "unit": "bytes"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 78
      },
      "id": 53,
      "targets": [
        {
          "expr": "rate(dockerstats_blockio_read_bytes{name=~\"azals_.*\"}[5m])",
          "legendFormat": "{{name}} Read"
        },
        {
          "expr": "rate(dockerstats_blockio_written_bytes{name=~\"azals_.*\"}[5m])",
          "legendFormat": "{{name}} Write"
        }
      ],
      "title": "Block I/O par container",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 86
      },
      "id": 700,
      "title": "üîê S√©curit√© & Auth",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "lineWidth": 2
          },
          "unit": "short"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 87
      },
      "id": 60,
      "targets": [
        {
          "expr": "sum(rate(azals_auth_attempts_total{status=\"success\"}[5m]))",
          "legendFormat": "Succ√®s/s"
        },
        {
          "expr": "sum(rate(azals_auth_attempts_total{status=\"failure\"}[5m]))",
          "legendFormat": "√âchecs/s"
        }
      ],
      "title": "Tentatives auth (succ√®s vs √©checs)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "lineWidth": 2
          },
          "unit": "short"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 87
      },
      "id": 61,
      "targets": [
        {
          "expr": "sum(rate(azals_auth_rate_limit_hits_total[5m])) by (tenant_id)",
          "legendFormat": "{{tenant_id}}"
        }
      ],
      "title": "Rate limit hits",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 95
      },
      "id": 800,
      "title": "üè¢ Business ‚Äî Tenants & D√©cisions",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 6,
        "x": 0,
        "y": 96
      },
      "id": 70,
      "options": {
        "colorMode": "background",
        "graphMode": "none",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "azals_tenants_active",
          "legendFormat": "Tenants"
        }
      ],
      "title": "Tenants actifs",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 6,
        "x": 6,
        "y": 96
      },
      "id": 71,
      "options": {
        "colorMode": "background",
        "graphMode": "area",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "targets": [
        {
          "expr": "sum(increase(azals_decisions_total[5m]))",
          "legendFormat": "D√©cisions"
        }
      ],
      "title": "D√©cisions (5m)",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short"
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 96
      },
      "id": 72,
      "targets": [
        {
          "expr": "azals_system_health",
          "legendFormat": "{{component}}"
        }
      ],
      "title": "Sant√© composants",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 105
      },
      "id": 900,
      "title": "üåê Site Web ‚Äî azalscore.com",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "red",
                "value": null
              },
              {
                "color": "yellow",
                "value": 100
              },
              {
                "color": "green",
                "value": 500
              }
            ]
          }
        }
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 0,
        "y": 106
      },
      "id": 901,
      "options": {
        "graphMode": "area",
        "colorMode": "background",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "title": "Visiteurs uniques (24h)",
      "type": "stat",
      "targets": [
        {
          "expr": "azals_website_unique_visitors",
          "legendFormat": "Visiteurs"
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "yellow",
                "value": 50
              },
              {
                "color": "red",
                "value": 70
              }
            ]
          }
        }
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 4,
        "y": 106
      },
      "id": 902,
      "options": {
        "graphMode": "area",
        "colorMode": "background",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "title": "Taux de rebond",
      "type": "stat",
      "targets": [
        {
          "expr": "azals_website_bounce_rate",
          "legendFormat": "Bounce"
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "red",
                "value": null
              },
              {
                "color": "yellow",
                "value": 60
              },
              {
                "color": "green",
                "value": 120
              }
            ]
          }
        }
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 8,
        "y": 106
      },
      "id": 903,
      "options": {
        "graphMode": "area",
        "colorMode": "background",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "title": "Dur√©e session moy.",
      "type": "stat",
      "targets": [
        {
          "expr": "azals_website_avg_session_duration_seconds",
          "legendFormat": "Dur√©e"
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 12,
        "y": 106
      },
      "id": 904,
      "options": {
        "graphMode": "area",
        "colorMode": "background",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "title": "Pages vues (5m)",
      "type": "stat",
      "targets": [
        {
          "expr": "sum(increase(azals_website_page_views_total[5m]))",
          "legendFormat": "Vues"
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short"
        }
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 16,
        "y": 106
      },
      "id": 905,
      "options": {
        "graphMode": "area",
        "colorMode": "background",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "title": "Sessions (5m)",
      "type": "stat",
      "targets": [
        {
          "expr": "sum(increase(azals_website_sessions_total[5m]))",
          "legendFormat": "Sessions"
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          }
        }
      },
      "gridPos": {
        "h": 4,
        "w": 4,
        "x": 20,
        "y": 106
      },
      "id": 906,
      "options": {
        "graphMode": "area",
        "colorMode": "background",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ]
        }
      },
      "title": "Formulaires (5m)",
      "type": "stat",
      "targets": [
        {
          "expr": "sum(increase(azals_website_form_submissions_total[5m]))",
          "legendFormat": "Forms"
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 15
          }
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 110
      },
      "id": 910,
      "options": {
        "tooltip": {
          "mode": "multi"
        }
      },
      "title": "Vues par page",
      "type": "timeseries",
      "targets": [
        {
          "expr": "sum(rate(azals_website_page_views_total[5m])) by (page) * 60",
          "legendFormat": "{{page}}"
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 15
          }
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 110
      },
      "id": 911,
      "options": {
        "tooltip": {
          "mode": "multi"
        }
      },
      "title": "Sessions par source",
      "type": "timeseries",
      "targets": [
        {
          "expr": "sum(rate(azals_website_sessions_total[5m])) by (source) * 60",
          "legendFormat": "{{source}}"
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 10
          }
        }
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 0,
        "y": 118
      },
      "id": 912,
      "options": {
        "tooltip": {
          "mode": "multi"
        }
      },
      "title": "Vues par device",
      "type": "timeseries",
      "targets": [
        {
          "expr": "sum(rate(azals_website_page_views_total[5m])) by (device_type) * 60",
          "legendFormat": "{{device_type}}"
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 10
          }
        }
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 8,
        "y": 118
      },
      "id": 913,
      "options": {
        "tooltip": {
          "mode": "multi"
        }
      },
      "title": "Formulaires par type",
      "type": "timeseries",
      "targets": [
        {
          "expr": "sum(rate(azals_website_form_submissions_total[5m])) by (form_type) * 60",
          "legendFormat": "{{form_type}}"
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 10
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "success"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "green",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "error"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "red",
                  "mode": "fixed"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 8,
        "x": 16,
        "y": 118
      },
      "id": 914,
      "options": {
        "tooltip": {
          "mode": "multi"
        }
      },
      "title": "Newsletter signups",
      "type": "timeseries",
      "targets": [
        {
          "expr": "sum(rate(azals_website_newsletter_signups_total[5m])) by (status) * 60",
          "legendFormat": "{{status}}"
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 15
          }
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 126
      },
      "id": 915,
      "options": {
        "tooltip": {
          "mode": "multi"
        }
      },
      "title": "Blog ‚Äî Vues par article",
      "type": "timeseries",
      "targets": [
        {
          "expr": "topk(10, sum(rate(azals_website_blog_views_total[5m])) by (post_slug) * 60)",
          "legendFormat": "{{post_slug}}"
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "PBFA97CFB590B2093"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "custom": {
            "lineWidth": 2,
            "fillOpacity": 10
          }
        }
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 126
      },
      "id": 916,
      "options": {
        "tooltip": {
          "mode": "multi"
        }
      },
      "title": "Sessions par medium",
      "type": "timeseries",
      "targets": [
        {
          "expr": "sum(rate(azals_website_sessions_total[5m])) by (medium) * 60",
          "legendFormat": "{{medium}}"
        }
      ]
    }
  ],
  "refresh": "15s",
  "schemaVersion": 38,
  "style": "dark",
  "tags": [
    "azalscore",
    "production"
  ],
  "templating": {
    "list": [
      {
        "current": {
          "selected": false,
          "text": "All",
          "value": "$__all"
        },
        "datasource": {
          "type": "prometheus",
          "uid": "PBFA97CFB590B2093"
        },
        "definition": "label_values(azals_http_requests_total, tenant_id)",
        "hide": 0,
        "includeAll": true,
        "label": "Tenant",
        "multi": true,
        "name": "tenant_id",
        "query": {
          "query": "label_values(azals_http_requests_total, tenant_id)",
          "refId": "StandardVariableQuery"
        },
        "refresh": 2,
        "type": "query"
      },
      {
        "current": {
          "selected": false,
          "text": "production",
          "value": "production"
        },
        "hide": 0,
        "label": "Environnement",
        "name": "env",
        "options": [
          {
            "selected": true,
            "text": "production",
            "value": "production"
          },
          {
            "selected": false,
            "text": "staging",
            "value": "staging"
          }
        ],
        "type": "custom"
      }
    ]
  },
  "time": {
    "from": "now-1h",
    "to": "now"
  },
  "timepicker": {},
  "timezone": "Europe/Paris",
  "title": "AZALSCORE ‚Äî Production",
  "uid": "azalscore-production",
  "version": 9
}