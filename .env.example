# AZALS - Variables d'environnement ÉLITE
# =========================================
# Copier ce fichier en .env et adapter les valeurs
# AUCUN SECRET PAR DÉFAUT EN PRODUCTION

# ===========================================
# ENVIRONNEMENT (OBLIGATOIRE)
# ===========================================
# Valeurs: test, development, demo, staging, production
# - demo: Mode démonstration (pas de warnings de sécurité)
# - development: Mode développement (warnings sur branche main)
# - staging: Pré-production
# - production: Production (validation stricte des secrets)
ENVIRONMENT=demo

# ===========================================
# BASE DE DONNÉES (OBLIGATOIRE)
# ===========================================
DATABASE_URL=postgresql://azals_user:CHANGEME_PASSWORD@postgres:5432/azals

# PostgreSQL (pour docker-compose)
POSTGRES_DB=azals
POSTGRES_USER=azals_user
POSTGRES_PASSWORD=CHANGEME_PASSWORD

# Pool de connexions DB
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10

# ===========================================
# SÉCURITÉ (OBLIGATOIRE)
# ===========================================
# SECRET_KEY - OBLIGATOIRE, min 32 caractères
# Générer avec: python -c "import secrets; print(secrets.token_urlsafe(48))"
SECRET_KEY=CHANGEME_SECRET_KEY

# BOOTSTRAP_SECRET - OBLIGATOIRE en production
# Utilisé pour la création du premier admin
# Générer avec: python -c "import secrets; print(secrets.token_urlsafe(48))"
BOOTSTRAP_SECRET=CHANGEME_BOOTSTRAP_SECRET

# ENCRYPTION_KEY - OBLIGATOIRE pour chiffrer les données sensibles
# Générer avec: openssl rand -base64 32
ENCRYPTION_KEY=CHANGEME_ENCRYPTION_KEY

# ===========================================
# APPLICATION
# ===========================================
APP_NAME=AZALS
DEBUG=false

# ===========================================
# CORS (OBLIGATOIRE en production)
# ===========================================
#
# !!! AVERTISSEMENT SÉCURITÉ !!!
# La configuration CORS ci-dessous utilise localhost.
# C'est UNIQUEMENT pour le développement local.
#
# EN PRODUCTION, vous DEVEZ:
# 1. Utiliser UNIQUEMENT des domaines HTTPS
# 2. Ne JAMAIS utiliser localhost ou 127.0.0.1
# 3. Ne JAMAIS utiliser d'adresses IP publiques
# 4. Ne JAMAIS utiliser le wildcard (*)
#
# Exemple production:
# CORS_ORIGINS=https://app.example.com,https://admin.example.com
#
# Le middleware de sécurité BLOQUERA le démarrage si:
# - CORS_ORIGINS contient localhost en production
# - CORS_ORIGINS contient une adresse IP
# - CORS_ORIGINS contient un wildcard (*)
# - CORS_ORIGINS utilise http:// au lieu de https://
#
# !!! NE PAS COPIER CETTE VALEUR EN PRODUCTION !!!
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# ===========================================
# RATE LIMITING
# ===========================================
RATE_LIMIT_PER_MINUTE=100
AUTH_RATE_LIMIT_PER_MINUTE=5

# ===========================================
# REDIS (Recommandé en production)
# ===========================================
# Pour rate limiting distribué et cache
# REDIS_URL=redis://redis:6379/0

# ===========================================
# MONITORING (Optionnel)
# ===========================================
# GRAFANA_USER=admin
# GRAFANA_PASSWORD=CHANGEME_GRAFANA_PASSWORD
# GRAFANA_ROOT_URL=http://localhost:3000

# ===========================================
# PRODUCTION CHECKLIST - OBLIGATOIRE AVANT DÉPLOIEMENT
# ===========================================
#
# SECRETS (tous doivent être régénérés pour la production):
# [ ] SECRET_KEY - python -c "import secrets; print(secrets.token_urlsafe(48))"
# [ ] BOOTSTRAP_SECRET - python -c "import secrets; print(secrets.token_urlsafe(48))"
# [ ] ENCRYPTION_KEY - openssl rand -base64 32
# [ ] DATABASE_URL - mot de passe fort (min 32 caractères aléatoires)
#
# ENVIRONNEMENT:
# [ ] ENVIRONMENT=production
# [ ] DEBUG=false
#
# SÉCURITÉ CORS (CRITIQUE):
# [ ] CORS_ORIGINS utilise UNIQUEMENT https://
# [ ] CORS_ORIGINS ne contient PAS localhost
# [ ] CORS_ORIGINS ne contient PAS d'adresses IP
# [ ] CORS_ORIGINS ne contient PAS de wildcard (*)
#
# INFRASTRUCTURE:
# [ ] Redis configuré pour rate limiting distribué
# [ ] SSL/TLS activé sur le reverse proxy
# [ ] Headers X-Forwarded-For configurés sur le reverse proxy
# [ ] Logs sensibles désactivés (pas de mots de passe, tokens, etc.)
#
# MONITORING:
# [ ] Alertes configurées pour les erreurs 5xx
# [ ] Alertes configurées pour les tentatives de rate limiting
# [ ] Backup de la base de données configuré
